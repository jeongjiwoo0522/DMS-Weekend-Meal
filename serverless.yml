service: dms-weekend-meal
provider:
  name: aws
  runtime: nodejs14.x
  stage: prod             # optional, default: dev
  region: ap-northeast-2  # optional, default: us-east-1
  timeout: 30             # optional, in seconds, default: 6
  versionFunctions: false # optional, default: true
functions:
  binary:
    name: ${self:service}-${self:provider.stage}-binary
    handler: lambda.xlsx
    events:
      - http:
         path: '/binary/{pathvar+}'
         method: get
  api:
    name: ${self:service}-${self:provider.stage}
    handler: lambda.handler  # ${DIR}/${FILE}.${MODULE}
    events:
      - http: 
         method: ANY
         path: '{proxy+}'
plugins:
  - serverless-offline
  - serverless-plugin-typescript
  - serverless-aws-static-file-handler/plugins/BinaryMediaTypes

custom:
  apiGateway:
    binaryMediaTypes:
      - "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
